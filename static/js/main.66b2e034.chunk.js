(this.webpackJsonppiitech_station_dashboard=this.webpackJsonppiitech_station_dashboard||[]).push([[0],{44:function(t,e,n){},46:function(t,e,n){},81:function(t,e,n){},82:function(t,e,n){},83:function(t,e,n){},84:function(t,e,n){},85:function(t,e,n){"use strict";n.r(e);var c=n(2),a=n(35),s=n.n(a),i=n(9),r=n(3),o=n(11),l=(n(44),n(1)),d=function(t){return Object(l.jsx)("div",{className:"badge ".concat(t.status?t.status:""),style:t.style,children:Object(l.jsx)("span",{className:"badge-title",children:t.title})})},j=function(t){return Object(l.jsx)("div",{className:"badge circle ".concat(t.large?"large":""," ").concat(t.status?t.status:""),style:t.style,children:Object(l.jsx)("span",{className:"badge-title",children:t.title})})},u=(n(46),function(t){return t.data?Object(l.jsxs)(i.b,{className:"card card-station",to:"/station-information/".concat(t.id),children:[Object(l.jsx)("div",{className:"station-name",children:Object(l.jsx)("span",{className:"label",children:t.name})}),Object(l.jsx)("div",{className:"card-container",children:t.data.map((function(t){return Object(l.jsxs)("div",{className:"information-tag",children:[Object(l.jsx)("span",{className:"title",children:t.display_name}),Object(l.jsx)("span",{className:"value",children:t.value}),Object(l.jsx)("span",{className:"unit",children:t.unit?t.unit:"-"})]})}))})]}):null}),b=(n(55),"".concat("http://54.254.178.1:5000").concat("/api/v1")),h=n(16),O=n.n(h),x=(n(81),function(t){var e=new WebSocket("wss://54.254.178.1"),n=Object(c.useState)(null),a=Object(o.a)(n,2),s=a[0],i=a[1];return Object(c.useEffect)((function(){var t;e.onopen=function(){console.log("CONNECTED")},t=function(t){i(t)},O.a.get("".concat(b,"/stations/data")).then((function(e){return t(e.data)}))}),[]),s?Object(l.jsxs)("div",{className:"view with-nav monitor",children:[Object(l.jsxs)("header",{className:"status-badges-header",children:[Object(l.jsx)("span",{className:"header-title",children:"Data Alarm"}),Object(l.jsx)(d,{title:"Lost Connection",status:"default"}),Object(l.jsx)(d,{title:"Exceeded",status:"error"}),Object(l.jsx)(d,{title:"Tend to exceed",status:"warning"}),Object(l.jsx)(d,{title:"Good",status:"good"})]}),Object(l.jsx)("div",{className:"card-container",children:s.map((function(t){return Object(l.jsx)(u,{name:"TR\u1ea0M ".concat(t.station_id),data:t.data,id:t.station_id})}))})]}):null}),m=n(38),v=n.n(m),g=n(39),f=n.n(g),N=n(22),p=(n(82),function(t){var e=new Date,n=(e.getHours(),e.getDate(),e.getMonth(),e.getFullYear(),Object(c.useState)(null)),a=Object(o.a)(n,2),s=a[0],r=a[1],d=Object(c.useState)(null),u=Object(o.a)(d,2),h=u[0],x=u[1],m=Object(c.useState)(null),g=Object(o.a)(m,2),p=g[0],w=g[1],S=Object(c.useState)(null),y=Object(o.a)(S,2),D=y[0],F=y[1],E=Object(c.useState)(0),M=Object(o.a)(E,2),T=M[0],C=M[1];Object(c.useEffect)((function(){!function(t,e,n,c){var a=Math.floor(new Date(e).getTime()/1e3),s=Math.floor(new Date(n).getTime()/1e3);O.a.post("".concat(b,"/station/historical"),{station_id:t,from_time:a,to_time:s}).then((function(t){return c(t.data)}))}(parseInt(t.match.params.id),new Date(2021,10,29),new Date(2021,10,30),(function(t){r(t.reverse());var e=t.filter((function(t,e){if(e%12==0)return!0})),n=e.map((function(t){var e=new Date(1e3*t.timestamp);return{time:Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()+1),value:t.data.temperature}}));F(n),x(e.reverse())})),setInterval((function(){_()}))}),[]);var _=function(){var t=new Date,e=t.getMonth()+1<=9?"0"+t.getMonth()+1:t.getMonth()+1,n=t.getDate()<=9?"0"+t.getDate():t.getDate(),c=t.getHours()<=9?"0"+t.getHours():t.getHours(),a=t.getMinutes()<=9?"0"+t.getMinutes():t.getMinutes(),s=t.getSeconds()<=9?"0"+t.getSeconds():t.getSeconds();w({yearNow:t.getFullYear(),monthNowStr:e,dateNowStr:n,hoursNowStr:c,minutesNowStr:a,secondNowStr:s})};return s||p||h||D?Object(l.jsxs)("div",{className:"view with-nav station",children:[Object(l.jsxs)("header",{className:"view-header",children:[Object(l.jsxs)("div",{className:"first",children:[Object(l.jsx)(i.b,{to:"/",children:Object(l.jsx)(j,{title:"TR\u1ea0M ".concat(t.match.params.id),large:!0,style:{color:"#8E8E8E",fontSize:15,fontWeight:700,borderStyle:"solid",borderWidth:1,borderColor:"#8E8E8E",paddingLeft:64,paddingRight:64,cursor:"pointer"}})}),Object(l.jsx)(j,{title:"".concat(null===p||void 0===p?void 0:p.yearNow,"-").concat(null===p||void 0===p?void 0:p.monthNowStr,"-").concat(null===p||void 0===p?void 0:p.dateNowStr," ").concat(null===p||void 0===p?void 0:p.hoursNowStr,":").concat(null===p||void 0===p?void 0:p.minutesNowStr,":").concat(null===p||void 0===p?void 0:p.secondNowStr),large:!0,style:{color:"#FFFFFF",fontSize:15,fontWeight:600,borderStyle:"solid",borderWidth:1,background:"#2F8ED5",borderColor:"#2F8ED5",paddingLeft:64,paddingRight:64,cursor:"pointer"}})]}),Object(l.jsx)("div",{className:"header-spacing"}),Object(l.jsxs)("div",{className:"end",children:[Object(l.jsx)("div",{className:"header-tab-btn ".concat(0==T?"active":""),onClick:function(){return C(0)},children:Object(l.jsx)(N.b,{className:"icon"})}),Object(l.jsx)("div",{className:"header-tab-btn ".concat(1==T?"active":""),onClick:function(){return C(1)},children:Object(l.jsx)(N.a,{className:"icon"})})]})]}),0==T?Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)("table",{children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"TIME"}),Object(l.jsx)("th",{children:"NHI\u1ec6T \u0110\u1ed8"}),Object(l.jsx)("th",{children:"\u0110\u1ed8 \u1ea8M"}),Object(l.jsx)("th",{children:"\u0110\u1ed8 PH"}),Object(l.jsx)("th",{children:"\u0110\u1ed8 \u0110\u1eaaN"}),Object(l.jsx)("th",{children:"NH4+"}),Object(l.jsx)("th",{children:"FLOW IN"}),Object(l.jsx)("th",{children:"FLOW OUT"})]}),null===s||void 0===s?void 0:s.map((function(t){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:t.timestamp}),Object(l.jsx)("td",{children:t.data.temperature}),Object(l.jsx)("td",{children:t.data.humidity}),Object(l.jsx)("td",{children:t.data.pH}),Object(l.jsx)("td",{children:t.data.conductivity}),Object(l.jsx)("td",{children:"0"}),Object(l.jsx)("td",{children:"0"}),Object(l.jsx)("td",{children:"0"})]})}))]})}):Object(l.jsx)("div",{className:"container",children:Object(l.jsx)(f.a,{highcharts:v.a,options:{chart:{type:"line"},xAxis:{type:"datetime",max:D[0].time},title:{text:"Nhi\u1ec7t \u0110\u1ed9"},series:[{pointPlacement:0,pointRange:36e5,data:[{x:D[6].time,y:D[6].value},{x:D[5].time,y:D[5].value},{x:D[4].time,y:D[4].value},{x:D[3].time,y:D[3].value},{x:D[2].time,y:D[2].value},{x:D[1].time,y:D[1].value},{x:D[0].time,y:D[0].value}]}]}})})]}):null}),w=n(23),S=(n(83),function(t){return Object(l.jsxs)("nav",{className:"navigation-bar",children:[Object(l.jsx)("div",{className:"logo"}),Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:Object(l.jsxs)(i.b,{to:"#",children:[Object(l.jsx)(w.b,{className:"icon"}),Object(l.jsx)("span",{children:"Dashboard"})]})}),Object(l.jsx)("li",{className:"active",children:Object(l.jsxs)(i.b,{to:"/",children:[Object(l.jsx)(w.a,{className:"icon"}),Object(l.jsx)("span",{children:"Monitoring"})]})})]})]})}),y=(n(84),function(){return Object(l.jsx)("main",{children:Object(l.jsxs)(r.c,{children:[Object(l.jsx)(r.a,{path:"/station-information/:id",component:p}),Object(l.jsx)(r.a,{path:"/",component:x})]})})}),D=function(t){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(S,{}),Object(l.jsx)(y,{})]})},F=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,s=e.getLCP,i=e.getTTFB;n(t),c(t),a(t),s(t),i(t)}))};s.a.render(Object(l.jsx)(i.a,{basename:"/",children:Object(l.jsx)(D,{})}),document.getElementById("root")),F()}},[[85,1,2]]]);
//# sourceMappingURL=main.66b2e034.chunk.js.map